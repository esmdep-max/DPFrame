<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Frame Overlay</title>
  <style>
    :root {
      --bg:#000000;
      --card:#1a1a1a;
      --accent:#ed1b36;
      --muted:#aaaaaa;
    }
    body {
      margin:0;
      font-family:sans-serif;
      background:var(--bg);
      color:#fff;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
    }
    .card {
      background:var(--card);
      padding:20px;
      border-radius:16px;
      text-align:center;
      max-width:400px;
      box-shadow:0 4px 20px rgba(0,0,0,0.5);
    }
    input[type=file] {
      display:none;
    }
    .dropzone {
      border:2px dashed var(--muted);
      border-radius:12px;
      padding:20px;
      cursor:pointer;
      margin-bottom:16px;
    }
    .btn {
      display:inline-block;
      padding:8px 12px;
      border-radius:8px;
      background:var(--accent);
      color:#fff;
      font-weight:600;
      text-decoration:none;
      cursor:pointer;
      transition:background 0.2s;
    }
    .btn:hover {
      background:#c4162d;
    }
    canvas {
      max-width:100%;
      margin-top:12px;
      border-radius:50%;
      background:#222;
    }
    svg {
      width:48px;
      height:48px;
      opacity:0.9;
      margin-bottom:8px;
    }
  </style>
</head>
<body>
  <div class="card">
    <h2>Upload your photo</h2>
    <p>Upload your photo and we'll auto-apply the transparent PNG frame.<br/>Result: a round PNG with transparent corners.<br/><strong>For best results, upload a square image.</strong></p>
    <label class="dropzone" for="upload">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white">
        <path d="M12 5c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-9 3h3.17l1.83-2h6l1.83 2H21c1.1 0 2 .9 2 2v9c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V10c0-1.1.9-2 2-2zm9 11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5z"/>
      </svg>
      <div>Click or drop image here</div>
      <input id="upload" type="file" accept="image/*">
    </label>
    <canvas id="canvas" width="500" height="500"></canvas><br>
    <a id="download" class="btn" style="display:none" download="framed.png">Download PNG</a>
  </div>

<script>
const upload = document.getElementById('upload');
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const download = document.getElementById('download');
const frame = new Image();
frame.src = 'frame-default.png';

upload.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    const img = new Image();
    img.onload = () => {
      // Clear canvas
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // Draw circular clip
      ctx.save();
      ctx.beginPath();
      ctx.arc(canvas.width/2, canvas.height/2, canvas.width/2, 0, Math.PI*2);
      ctx.closePath();
      ctx.clip();
      // Draw photo
      ctx.drawImage(img,0,0,canvas.width,canvas.height);
      ctx.restore();
      // Overlay frame
      frame.onload = ()=>{
        ctx.drawImage(frame,0,0,canvas.width,canvas.height);
      };
      if(frame.complete) ctx.drawImage(frame,0,0,canvas.width,canvas.height);
      // Enable download
      download.style.display = 'inline-block';
      download.href = canvas.toDataURL('image/png');
    };
    img.src = ev.target.result;
  };
  reader.readAsDataURL(file);
});
</script>
</body>
</html>
